<?php

/**
 * @Autor	: Diego Lepera
 * @E-mail	: d_lepera@hotmail.com
 * @Projeto	: FrameworkDL
 * @Data	: 07/01/2015 18:34:49
 */

/*
 * CORRIGIR: O recurso 'Testar configuração' deve levar em consideração o que está no formulário e não o que está salvo no banco de dados
 */

!isset($params) and $params = $this->_obterparams();

$mod = $params['modelo'];

?>

[DL3-CONTEUDO]
    <?php include_once 'aplicativos/'. DL3_APLICATIVO .'/comum/visoes/titulo_h2.phtml'; ?>

    <form id="form-<?= $params['form-id']; ?>" method="post" action="<?= $params['form-action']; ?>">
        <?php if( !$params['incluindo'] ): ?>
        <input type="hidden" name="id" value="<?= $mod->id; ?>"/>
        <?php endif; ?>

        <fieldset class="form-grupo">
            <legend class="form-legenda"><?= TXT_LEGENDA_SERVIDOR; ?></legend>

            <p class="form-paragr">
                <label for="txt-titulo" class="form-rotulo"><?= TXT_ROTULO_TITULO; ?>:</label><br/>
                <input type="text" name="titulo" id="txt-titulo" value="<?= $mod->titulo; ?>" class="form-controle" required/>
            </p>

            <p class="form-paragr">
                <label for="txt-host" class="form-rotulo"><?= TXT_ROTULO_HOST; ?>:</label><br/>
                <input type="text" name="host" id="txt-host" value="<?= $mod->host; ?>" class="form-controle" required/>
                : <input type="number" name="porta" value="<?= $mod->porta; ?>" min="1" max="9999" class="form-controle form-numero" required/>
            </p>
        </fieldset>

        <fieldset class="form-grupo">
            <legend class="form-legenda"><?= TXT_LEGENDA_AUTENTICACAO; ?></legend>

            <p class="form-paragr">
                <span class="form-rotulo"><?= TXT_ROTULO_REQUER_AUTENT; ?></span><br/>
                <input type="checkbox" name="autent" id="chk-autent" class="form-alternar"<?php $mod->autent and print(' CHECKED'); ?>/>
                <label for="chk-autent"></label>
            </p>

            <p class="form-paragr">
                <label for="sel-cripto" class="form-rotulo"><?= TXT_ROTULO_TIPO_CRIPTO; ?>:</label><br/>
                <select name="cripto" id="sel-cripto" class="form-controle">
                    <option value=""><?= TXT_OPCAO_NENHUMA; ?></option>
                    <option value="tls"<?php $mod->cripto == 'tls' and print(' SELECTED'); ?>><?= TXT_OPCAO_TLS; ?></option>
                    <option value="ssl"<?php $mod->cripto == 'ssl' and print(' SELECTED'); ?>><?= TXT_OPCAO_SSL; ?></option>
                </select>
            </p>

            <p class="form-paragr">
                <label for="txt-conta" class="form-rotulo"><?= TXT_ROTULO_CONTA; ?>:</label><br/>
                <input type="text" name="conta" id="txt-conta" class="form-controle" value="<?= $mod->conta; ?>"/>
            </p>

            <p class="form-paragr">
                <label for="txt-senha" class="form-rotulo"><?= TXT_ROTULO_SENHA; ?>:</label><br/>
                <input type="password" name="senha" id="txt-senha" value="<?= $mod->senha; ?>" class="form-controle"/>
            </p>
        </fieldset>

        <fieldset class="form-grupo">
            <legend class="form-legenda"><?= TXT_LEGENDA_CONFIGURACOES_ENVIO; ?></legend>

            <p class="form-paragr">
                <label for="de-nome" class="form-rotulo"><?= TXT_ROTULO_DE_NOME; ?>:</label><br/>
                <input type="text" name="de_nome" id="de-nome" value="<?= $mod->de_nome; ?>" class="form-controle"/>
            </p>

            <p class="form-paragr">
                <label for="de-email" class="form-rotulo"><?= TXT_ROTULO_DE_EMAIL; ?>:</label><br/>
                <input type="email" name="de_email" id="de-email" value="<?= $mod->de_email; ?>" class="form-controle"/>
            </p>

            <p class="form-paragr">
                <label for="responder-para" class="form-rotulo"><?= TXT_ROTULO_RESPONDER_PARA; ?>:</label><br/>
                <input type="email" name="responder_para" id="responder-para" value="<?= $mod->responder_para; ?>" class="form-controle"/>
            </p>

            <p class="form-paragr">
                <span class="form-rotulo"><?= TXT_ROTULO_HTML; ?></span><br/>
                <span class="form-dica"><?= MSG_DICA_EMAIL_HTML; ?></span><br/>
                <input type="checkbox" name="html" id="chk-html" class="form-alternar"<?php $mod->html and print(' CHECKED'); ?>/>
                <label for="chk-html"></label>
            </p>
        </fieldset>

        <p class="form-paragr">
            <span class="form-rotulo"><?= TXT_ROTULO_PRINCIPAL; ?></span><br/>
            <span class="form-dica"><?= MSG_DICA_EMAIL_PRINCIPAL; ?></span><br/>
            <input type="checkbox" name="principal" id="chk-principal" class="form-alternar"<?php $mod->principal and print(' CHECKED'); ?>/>
            <label for="chk-principal"></label>
        </p>

	    <p class="form-paragr">
		    <span class="form-rotulo"><?= TXT_ROTULO_DEBUG; ?></span><br/>
		    <span class="form-dica"><?= MSG_DICA_DEBUG; ?></span><br/>
		    <input type="checkbox" name="debug" id="chk-debug" class="form-alternar"<?php $mod->debug and print(' CHECKED'); ?>/>
		    <label for="chk-debug"></label>
	    </p>

        <p class="form-botoes">
            <button type="submit" class="btn-salvar"><?= TXT_BOTAO_SALVAR; ?></button>
            <button type="reset" class="btn-cancelar"><?= TXT_BOTAO_CANCELAR; ?></button>

            <?php if( !$params['incluindo'] && $params['perm-testar?'] ): ?>
            <a href="javascript:;" onclick="$sf._executar('admin/envio-de-emails/testar-configuracao/<?= $mod->id; ?>');" class="com-icone ico-email">
                <?= TXT_LINK_TESTAR_CONFIGURACAO; ?>
            </a>
            <?php endif; ?>
        </p>
    </form>
[/DL3-CONTEUDO]