document.write('<script src="'+dir_relativo+'web/js/min/dl-formulario/mostrarmsg.plugin-min.js"></script>'),document.write('<script src="'+dir_relativo+'web/js/min/dl-formulario/mascara.plugin-min.js"></script>'),function($){function e(e){var t=e.trim(),n,a;if(/^[?\[{]{1,}(.+)[}\]{1,}]?$/.test(t)){var i=$.parseJSON(t);i=/^\[/.test(t)?i[i.length-1]:i,n=i.mensagem,a=i.tipo}else n=t,a="atencao";return{msg:n,ret:a}}function t(t,i,o,r){if(o){var c=new FormData;$.each(a,function(e,t){c.append(n[e],t)}),$.each(t._serialize().split("&"),function(e,t){var n=/^([\w\-\[\]]+)=(.+)?$/;if(n.test(t)){var a=n.exec(t);c.append(a[1],a[2]||"")}})}$.ajax({url:i,type:"post",data:c||t._serialize(),cache:!1,processData:!o,contentType:o?!1:"application/x-www-form-urlencoded",success:function(t){var n=e(t);$("body")._mostrarmsg({mensagem:n.msg,tipo:["__msg-alerta",n.ret],botoes:[{texto:"x",classe:"btn-principal",funcao:"__msg-sucesso"===n.ret?r:function(){return!1}}]})}})}var n=[],a=[];$.fn._serialize=function(){var e="input:not(:file), select, textarea",t=[],n=$(this),a=$.merge(n.filter("form").find(e),n.filter(e));return a.each(function(){var e=this.name,n=this.type,a=encodeURIComponent(this.value);switch(n){case"checkbox":if("on"===a)a=this.checked?"on":"off";else if(!this.checked)return;break;case"radio":if(!this.checked)return}t.push(e+"="+a)}),t.join("&")},$.fn._formulario=function(e){var i={controle:"",namespace:"__form",antes:function(){return!0},depois:function(){return!0},aparencia:{tema:"dl-formulario",estilo:"formulario"},cktodos:[!1,":checkbox:first",':checkbox[name^="[]"]']};if(e=$.extend({},i,e),e.cktodos[0]){var o=$(e.cktodos[1]),r=$(e.cktodos[2]);o.click(function(){r.each(function(){this.checked=o.prop("checked")})})}return $(this).each(function(){var i=$(this);i.find("input:not(:hidden):not([readonly]), select, textarea").each(function(e){$(this).attr({tabindex:e+1})}),""===e.controle&&(e.controle=i.attr("action"));var o="multipart/form-data"===i.attr("enctype")&&i.find(":file").length>0;return o&&i.find(":file").on("change",function(e){var t=this.name;$.each(e.target.files,function(e,i){n.push(t),a.push(i)})}),i.find("[data-vld-func]").off("."+e.namespace).on("change."+e.namespace+" blur."+e.namespace,function(e){var t=$(this),n=e.target,a=window[t.data("vld-func")],i=t.data("vld-msg"),o="file"===this.type?{arq:n.files,exts:t.data("vld-exts"),max:t.data("vld-max")}:t.val();return"function"!=typeof a?(console.error("A função "+a+" não existe ou não pode ser acessada!"),!1):formValidacao(""!==o&&!a(o),n,i)}).trigger("change."+e.namespace),i.find(":submit").on("click."+e.namespace,function(){var e=$(this).parents("form"),t=e.find("[required]:not(:visible)");t.prop("disabled",!0),e[0].checkValidity()||t.prop("disabled",!1)}),i.off("."+e.namespace).on("submit."+e.namespace,function(n,a,r,c){if(n.stopPropagation(),n.preventDefault(),!e.antes()||"function"==typeof r&&!r())return!1;var s=i.find('[data-verificar-alteracao="1"][data-alterado="0"]');s.length>0?$("body")._msgconfirmacao({titulo:"Alteração de informações",mensagem:"Você não alterou algum(ns) campo(s) necessários.<br/><br/>Deseja continuar assim mesmo?",botao_sim:{texto:"Sim",classe:"btn-sim",funcao:function(){t(i,a||e.controle,o,c||e.depois)}},botao_nao:{texto:"Não",classe:"btn-nao btn-principal",funcao:function(){return!1}}}):t(i,a||e.controle,o,c||e.depois)}),i})},$.fn._executar=function(e,t,n,a){return this.each(function(){(!a||this.validity&&this.checkValidity())&&$(this).trigger("submit",[e,t,n])})}}(jQuery);